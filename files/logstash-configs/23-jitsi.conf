filter {
  if [type] == "jitsi" {
    mutate {
      add_tag => "jitsi"
    }
    if [message] =~ "^JVB" {
      grok {
        patterns_dir => [ "/etc/logstash/patterns.d" ]
        match => { "message" => "%{JITSIVB_INFO}" }
      }
    }
# Receive stream stats: discarded RTP packets: 0
    else if [message] =~ "^Receive stream stats" {
      grok {
        patterns_dir => [ "/etc/logstash/patterns.d" ]
        match => {"message" => "%{JITSIVB_RECEIVE_STREAM}"}
      }
    }
    else if [message] =~ "^SLF4J" {
      grok {
        patterns_dir => [ "/etc/logstash/patterns.d" ]
        match => {"message" => "%{JITSIVB_SLF4J}"}
      }
    }
  }
}
